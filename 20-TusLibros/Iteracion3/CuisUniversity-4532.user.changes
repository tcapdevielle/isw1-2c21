

----QUIT----(9 March 2021 14:58:42) CuisUniversity-4532.image priorSource: 13044060!

----STARTUP---- (9 March 2021 14:58:43) as /Users/hernan/Documents/Cuis/5.0-64Bits/Cuis-University-Installer/CuisUniversity-4532.image!


----QUIT----(9 March 2021 14:58:43) CuisUniversity-4532.image priorSource: 16885479!

----STARTUP---- (18 October 2021 11:05:57) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


----End fileIn of /home/tcapdevielle/Documents/CuisUniversity/Packages/System/Collections-CompactArrays.pck.st----!

----End fileIn of /home/tcapdevielle/Documents/CuisUniversity/Packages/Features/VectorGraphics.pck.st----!

----QUIT----(18 October 2021 11:06:52) CuisUniversity-4532.image priorSource: 16885703!

----STARTUP---- (24 October 2021 18:21:28) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


----End fileIn of /media/hdd/UBA/ISW1/Ejercicios/18-Portfolio 2/Portfolio2-Ejercicio.st----!

!testRun: #AccountSummaryTest #test01summaryForNewReceptiveAccountIsJustBalance stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test02summaryRegistersDeposits stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test03summaryRegistersWithdraws stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test04summaryRegistersTransfer stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test05summaryForEmptyPortfolioIsJustBalance stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test06summaryForPortfolioWithOneReceptiveAccountTransactions stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test07summaryForPortfolioWithOneReceptiveAccountTransfers stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test08summaryForPortfolioWithMultipleReceptiveAccountsTransactions stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test09summaryForPortfolioWithMultipleReceptiveAccountsTransfersToOuside stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #AccountSummaryTest #test10summaryForPortfolioWithMultipleReceptiveAccountsTransfersBetweenThemselves stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test01forNewReceptiveAccountIsZero stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test02forReceptiveAccountWithoutTransfersIsZero stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test03forReceptiveAccountSummaryIsPositive stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test04forReceptiveAccountSummaryIsNegative stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test05forEmptyPorfolioIsZero stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test06forPortfolioWithOneAccountWithoutTransfersIsZero stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test07forPortfolioWithOneAccountTransfers stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test08forPortfolioWithMultipleAccountsTransactions stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test09forPortfolioWithMultipleAccountsTransfersToExternalAccount stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferNetTest #test10forPortfolioWithMultipleAccountsTransfersBetweenThemselves stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferTest #test01creatingATransferAffectsBalanceOnBothEnds stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferTest #test02creatingATransferRegistersTransactionsOnBothEnds stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferTest #test03canMoveBetweenLegsOfATransfer stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferTest #test04transferCannotHaveNegativeAmount stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferTest #test05transferCannotHaveZeroAmount stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

!testRun: #TransferTest #test06cannotTransferToOneself stamp: 'TC 10/24/2021 18:21:57'!
PASSED!

----QUIT----(24 October 2021 18:22:02) CuisUniversity-4532.image priorSource: 17256913!

----STARTUP---- (26 October 2021 21:42:19) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


----End fileIn of /media/hdd/UBA/ISW1/Ejercicios/19-MarsRover-ElRegreso/MarsRover-WithHeading.st----!

!testRun: #MarsRoverDisplayTests #test01noMovementsEmptyLog stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test02trackPositionForward stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test03trackPositionBackwards stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test04multipleMoves stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test06trackHeadingChangeDoesNotTrackMovement stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test07trackHeadingTracksHeadingChangesWithR stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test08trackHeadingTracksHeadingChangesWithL stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test09trackHeadingOnlyTracksHeadingChanges stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test10trackPositionAndHeadingChangesWithTwoTrackers stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test11trackPositionOnlyAfterAddingPlugin stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test12trackHeadingOnlyAfterAddingPlugin stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test13trackPositionLeft stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test14trackPositionRight stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test15noMovementsEmptyWindow stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test16trackPositionChangeInWindow stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test17trackHeadingChangeInWindow stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test18trackHeadingAndPositionInWindow stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

!testRun: #MarsRoverDisplayTests #test19trackHeadingAndPositionInLoggerAndWindow stamp: 'TC 10/26/2021 21:42:43'!
PASSED!

----QUIT----(26 October 2021 21:42:48) CuisUniversity-4532.image priorSource: 17313666!

----STARTUP---- (30 October 2021 16:02:16) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


----QUIT----(30 October 2021 16:07:32) CuisUniversity-4532.image priorSource: 17344102!

----STARTUP---- (30 October 2021 16:12:16) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


----End fileIn of /media/hdd/UBA/ISW1/Ejercicios/20-TusLibros/TusLibros.st----!

!testRun: #CartTest #test01newCartIsEmpty stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test02cartWithBookAddedIsNotEmpty stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test03canCheckIfBookIsInCart stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test04canCheckAmountOfACertainBookInCart stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test05amountOfAddedBookMustNotBeNegative stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test06amountOfAddedBookMustNotBeZero stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test07addingAgainAnExistingBookToTheCartAddsUpTheAmounts stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test08addingANewBookDoesNotModifyThePreviousBooks stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test09listingAnEmptyCartIsEmpty stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test10listingACartWithOneBook stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test11listingACartWithManyBooks stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

!testRun: #CartTest #test12bookAddedMustBeInCatalog stamp: 'TC 10/30/2021 16:12:35'!
PASSED!

----QUIT----(30 October 2021 16:12:38) CuisUniversity-4532.image priorSource: 17344310!

----STARTUP---- (1 November 2021 20:07:53) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


----QUIT----(1 November 2021 20:08:51) CuisUniversity-4532.image priorSource: 17352805!

----STARTUP---- (2 November 2021 18:02:22) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


----QUIT----(2 November 2021 18:13:21) CuisUniversity-4532.image priorSource: 17353013!

----STARTUP---- (8 November 2021 16:56:02) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


----End fileIn of /media/hdd/UBA/ISW1/Ejercicios/18-Portfolio 2/Portfolio2-Ejercicio.st----!

!classRemoval: #Transfer stamp: 'TC 11/8/2021 16:56:28'!
Object subclass: #Transfer
	instanceVariableNames: 'value withdrawLeg depositLeg'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #TransferNet stamp: 'TC 11/8/2021 16:56:28'!
Report subclass: #TransferNet
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #AccountSummary stamp: 'TC 11/8/2021 16:56:28'!
Report subclass: #AccountSummary
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #Report stamp: 'TC 11/8/2021 16:56:29'!
Object subclass: #Report
	instanceVariableNames: 'account transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #Withdraw stamp: 'TC 11/8/2021 16:56:29'!
AccountTransaction subclass: #Withdraw
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #WithdrawLeg stamp: 'TC 11/8/2021 16:56:29'!
TransferLeg subclass: #WithdrawLeg
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #DepositLeg stamp: 'TC 11/8/2021 16:56:30'!
TransferLeg subclass: #DepositLeg
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #TransferLeg stamp: 'TC 11/8/2021 16:56:30'!
AccountTransaction subclass: #TransferLeg
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #Deposit stamp: 'TC 11/8/2021 16:56:30'!
AccountTransaction subclass: #Deposit
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #AccountTransaction stamp: 'TC 11/8/2021 16:56:30'!
Object subclass: #AccountTransaction
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #ReceptiveAccount stamp: 'TC 11/8/2021 16:56:31'!
Account subclass: #ReceptiveAccount
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #Portfolio stamp: 'TC 11/8/2021 16:56:31'!
Account subclass: #Portfolio
	instanceVariableNames: 'accounts parents'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #Account stamp: 'TC 11/8/2021 16:56:31'!
Object subclass: #Account
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #TransferTest stamp: 'TC 11/8/2021 16:56:32'!
TestCase subclass: #TransferTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #TransferNetTest stamp: 'TC 11/8/2021 16:56:32'!
TestCase subclass: #TransferNetTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #ReceptiveAccountTest stamp: 'TC 11/8/2021 16:56:32'!
TestCase subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #PortfolioTest stamp: 'TC 11/8/2021 16:56:33'!
TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #AccountSummaryTest stamp: 'TC 11/8/2021 16:56:33'!
TestCase subclass: #AccountSummaryTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

----End fileIn of /media/hdd/UBA/ISW1/Ejercicios/18-Portfolio 2/Portfolio2-Ejercicio.st----!

!testRun: #AccountSummaryTest #test01summaryForNewReceptiveAccountIsJustBalance stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test02summaryRegistersDeposits stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test03summaryRegistersWithdraws stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test04summaryRegistersTransfer stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test05summaryForEmptyPortfolioIsJustBalance stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test06summaryForPortfolioWithOneReceptiveAccountTransactions stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test07summaryForPortfolioWithOneReceptiveAccountTransfers stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test08summaryForPortfolioWithMultipleReceptiveAccountsTransactions stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test09summaryForPortfolioWithMultipleReceptiveAccountsTransfersToOuside stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #AccountSummaryTest #test10summaryForPortfolioWithMultipleReceptiveAccountsTransfersBetweenThemselves stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test01forNewReceptiveAccountIsZero stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test02forReceptiveAccountWithoutTransfersIsZero stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test03forReceptiveAccountSummaryIsPositive stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test04forReceptiveAccountSummaryIsNegative stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test05forEmptyPorfolioIsZero stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test06forPortfolioWithOneAccountWithoutTransfersIsZero stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test07forPortfolioWithOneAccountTransfers stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test08forPortfolioWithMultipleAccountsTransactions stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test09forPortfolioWithMultipleAccountsTransfersToExternalAccount stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferNetTest #test10forPortfolioWithMultipleAccountsTransfersBetweenThemselves stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferTest #test01creatingATransferAffectsBalanceOnBothEnds stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferTest #test02creatingATransferRegistersTransactionsOnBothEnds stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferTest #test03canMoveBetweenLegsOfATransfer stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferTest #test04transferCannotHaveNegativeAmount stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferTest #test05transferCannotHaveZeroAmount stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

!testRun: #TransferTest #test06cannotTransferToOneself stamp: 'TC 11/8/2021 16:56:40'!
PASSED!

----QUIT----(8 November 2021 16:57:04) CuisUniversity-4532.image priorSource: 17353221!

----STARTUP---- (11 November 2021 14:21:43) as /home/tcapdevielle/Documents/CuisUniversity/CuisUniversity-4532.image!


!classRemoval: #Cart stamp: 'TC 11/11/2021 14:22:14'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'TC 11/11/2021 14:22:14'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

----End fileIn of /home/tcapdevielle/Documents/CuisUniversity/20-TusLibros/TusLibros.st----!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test01createCartInvalidUser stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test02createCartInvalidPassword stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test03createCartCorrectly stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test04cartIdsAreIncremental stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test05listingEmptyCart stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test07addToInvalidCartThrowsError stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test11addBookCorrectlyToCartShowsInList stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test12listingCartWithSeveralBooks stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test13checkOutNonExistingCartThrowsError stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test17checkOutCorrectly stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test19canNotListCartAfter30Minutes stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test20canNotAddToCartAfter30Minutes stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test21canNotCheckoutCartAfter30Minutes stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test23listPurchasesInvalidUser stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test24listPurchasesInvalidPassword stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test25listPurchasesForNewUserReturnsEmpty stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test26listPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!testRun: #TusLibrosInterfaceTest #test27listPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 14:22:33'!
PASSED!

!methodRemoval: TusLibrosInterfaceTest #firstCartId stamp: 'TC 11/11/2021 14:30:51'!
firstCartId

	^ 0.!
!TusLibrosInterfaceTest methodsFor: 'tests - cart creation' stamp: 'TC 11/11/2021 14:32:18'!
test01creatingCartWithInvalidUserThrowsAnError
	
	self
		assertRunning: [ self sampleInterface createCartFor: 'andrew' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.! !

!methodRemoval: TusLibrosInterfaceTest #test01createCartInvalidUser stamp: 'TC 11/11/2021 14:32:18'!
test01createCartInvalidUser
	
	self
		assertRunning: [ self sampleInterface createCartFor: 'andrew' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.!
!TusLibrosInterfaceTest methodsFor: 'tests - cart creation' stamp: 'TC 11/11/2021 14:32:35'!
test02creatingCartWithIncorrectPasswordThrowsError
	
	self
		assertRunning: [ self sampleInterface createCartFor: 'john' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.! !

!methodRemoval: TusLibrosInterfaceTest #test02createCartInvalidPassword stamp: 'TC 11/11/2021 14:32:35'!
test02createCartInvalidPassword
	
	self
		assertRunning: [ self sampleInterface createCartFor: 'john' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.!
!TusLibrosInterfaceTest methodsFor: 'tests - cart creation' stamp: 'TC 11/11/2021 14:33:13'!
test03creatingCartWithValidCredentialsReturnsCartId
	
	| interface |
	
	interface := self sampleInterface.
	
	self assert: 0 equals: (interface createCartFor: 'john' withPassword: 'hunter2').! !

!methodRemoval: TusLibrosInterfaceTest #test03createCartCorrectly stamp: 'TC 11/11/2021 14:33:13'!
test03createCartCorrectly
	
	| interface |
	
	interface := self sampleInterface.
	
	self assert: 0 equals: (interface createCartFor: 'john' withPassword: 'hunter2').!
!TusLibrosInterfaceTest methodsFor: 'tests - cart creation' stamp: 'TC 11/11/2021 14:33:27'!
test04cartIdAreAssignedIncrementally
	
	| interface |
	
	interface := self sampleInterface.
	
	self assert: 0 equals: (interface createCartFor: 'john' withPassword: 'hunter2').
	self assert: 1 equals: (interface createCartFor: 'john' withPassword: 'hunter2').! !

!methodRemoval: TusLibrosInterfaceTest #test04cartIdsAreIncremental stamp: 'TC 11/11/2021 14:33:27'!
test04cartIdsAreIncremental
	
	| interface |
	
	interface := self sampleInterface.
	
	self assert: 0 equals: (interface createCartFor: 'john' withPassword: 'hunter2').
	self assert: 1 equals: (interface createCartFor: 'john' withPassword: 'hunter2').!
!TusLibrosInterfaceTest methodsFor: 'tests - cart creation' stamp: 'TC 11/11/2021 14:33:33'!
test04cartIdsAreAssignedIncrementally
	
	| interface |
	
	interface := self sampleInterface.
	
	self assert: 0 equals: (interface createCartFor: 'john' withPassword: 'hunter2').
	self assert: 1 equals: (interface createCartFor: 'john' withPassword: 'hunter2').! !

!methodRemoval: TusLibrosInterfaceTest #test04cartIdAreAssignedIncrementally stamp: 'TC 11/11/2021 14:33:33'!
test04cartIdAreAssignedIncrementally
	
	| interface |
	
	interface := self sampleInterface.
	
	self assert: 0 equals: (interface createCartFor: 'john' withPassword: 'hunter2').
	self assert: 1 equals: (interface createCartFor: 'john' withPassword: 'hunter2').!
!TusLibrosInterfaceTest methodsFor: 'tests - cart listing' stamp: 'TC 11/11/2021 14:34:41'!
test05listingEmptyCartReturnsEmptyCollection

	" Esto estaba en todos los tests que se podia utilizar (la mayoria) pero lo perdi y me quede sin tiempo"
	
	self withTestContext: [:interface :cartId :creditCard |
		self createFirstCart: interface.
		self assert: (interface listCart: 0) isEmpty.
	].! !

!methodRemoval: TusLibrosInterfaceTest #test05listingEmptyCart stamp: 'TC 11/11/2021 14:34:41'!
test05listingEmptyCart

	" Esto estaba en todos los tests que se podia utilizar (la mayoria) pero lo perdi y me quede sin tiempo"
	
	self withTestContext: [:interface :cartId :creditCard |
		self createFirstCart: interface.
		self assert: (interface listCart: 0) isEmpty.
	].!
!TusLibrosInterfaceTest methodsFor: 'tests - cart creation' stamp: 'TC 11/11/2021 14:35:07'!
test02creatingCartWithIncorrectPasswordThrowsAnError
	
	self
		assertRunning: [ self sampleInterface createCartFor: 'john' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.! !

!methodRemoval: TusLibrosInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsError stamp: 'TC 11/11/2021 14:35:07'!
test02creatingCartWithIncorrectPasswordThrowsError
	
	self
		assertRunning: [ self sampleInterface createCartFor: 'john' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.!
!TusLibrosInterfaceTest methodsFor: 'tests - cart listing' stamp: 'TC 11/11/2021 14:36:01'!
test12listingNonEmptyCartReturnsCollectionWithItsContents
	
	|interface cartId expectedList|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	interface addToCart: cartId book: 'validBook2' times: 2.
	interface addToCart: cartId book: 'validBook3' times: 1.
	interface addToCart: cartId book: 'validBook' times: 1.
	
	expectedList := Bag new.
	expectedList add: 'validBook' withOccurrences: 4.
	expectedList add: 'validBook2' withOccurrences: 2.
	expectedList add: 'validBook3'.
	
	self assert: expectedList equals: (interface listCart: cartId).! !

!methodRemoval: TusLibrosInterfaceTest #test12listingCartWithSeveralBooks stamp: 'TC 11/11/2021 14:36:01'!
test12listingCartWithSeveralBooks
	
	|interface cartId expectedList|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	interface addToCart: cartId book: 'validBook2' times: 2.
	interface addToCart: cartId book: 'validBook3' times: 1.
	interface addToCart: cartId book: 'validBook' times: 1.
	
	expectedList := Bag new.
	expectedList add: 'validBook' withOccurrences: 4.
	expectedList add: 'validBook2' withOccurrences: 2.
	expectedList add: 'validBook3'.
	
	self assert: expectedList equals: (interface listCart: cartId).!
!TusLibrosInterfaceTest methodsFor: 'tests - cart listing' stamp: 'TC 11/11/2021 14:36:10'!
test12listingNonEmptyCartReturnsCollectionWithItsContent
	
	|interface cartId expectedList|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	interface addToCart: cartId book: 'validBook2' times: 2.
	interface addToCart: cartId book: 'validBook3' times: 1.
	interface addToCart: cartId book: 'validBook' times: 1.
	
	expectedList := Bag new.
	expectedList add: 'validBook' withOccurrences: 4.
	expectedList add: 'validBook2' withOccurrences: 2.
	expectedList add: 'validBook3'.
	
	self assert: expectedList equals: (interface listCart: cartId).! !

!methodRemoval: TusLibrosInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContents stamp: 'TC 11/11/2021 14:36:10'!
test12listingNonEmptyCartReturnsCollectionWithItsContents
	
	|interface cartId expectedList|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	interface addToCart: cartId book: 'validBook2' times: 2.
	interface addToCart: cartId book: 'validBook3' times: 1.
	interface addToCart: cartId book: 'validBook' times: 1.
	
	expectedList := Bag new.
	expectedList add: 'validBook' withOccurrences: 4.
	expectedList add: 'validBook2' withOccurrences: 2.
	expectedList add: 'validBook3'.
	
	self assert: expectedList equals: (interface listCart: cartId).!
!TusLibrosInterfaceTest methodsFor: 'tests - cart adding' stamp: 'TC 11/11/2021 14:36:27'!
test07addingItemToInvalidCartThrowsAnError
	
	|interface cartId|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	self
		assertRunning: [ interface addToCart: (cartId + 1) book: 123 times: 1 ]
		producesError: TusLibrosInterface invalidCartIdErrorMessage.! !

!methodRemoval: TusLibrosInterfaceTest #test07addToInvalidCartThrowsError stamp: 'TC 11/11/2021 14:36:27'!
test07addToInvalidCartThrowsError
	
	|interface cartId|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	self
		assertRunning: [ interface addToCart: (cartId + 1) book: 123 times: 1 ]
		producesError: TusLibrosInterface invalidCartIdErrorMessage.!
!TusLibrosInterfaceTest methodsFor: 'tests - cart adding' stamp: 'TC 11/11/2021 14:37:55'!
test11addingAnItemToExistingCartAddsItToTheCollection
	
	|interface cartId|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	
	self assert: (Bag new add: 'validBook' withOccurrences: 3; yourself)
		equals: (interface listCart: cartId).! !

!methodRemoval: TusLibrosInterfaceTest #test11addBookCorrectlyToCartShowsInList stamp: 'TC 11/11/2021 14:37:55'!
test11addBookCorrectlyToCartShowsInList
	
	|interface cartId|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	
	self assert: (Bag new add: 'validBook' withOccurrences: 3; yourself)
		equals: (interface listCart: cartId).!
!TusLibrosInterfaceTest methodsFor: 'tests - cart checkout' stamp: 'TC 11/11/2021 14:38:11'!
test13checkOutNonExistingCartThrowsAnError
	
	|interface cartId creditCard|
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	self
		assertRunning: [ interface checkOutCart: (cartId + 1) withCard: creditCard ]
		producesError: TusLibrosInterface invalidCartIdErrorMessage.! !

!methodRemoval: TusLibrosInterfaceTest #test13checkOutNonExistingCartThrowsError stamp: 'TC 11/11/2021 14:38:11'!
test13checkOutNonExistingCartThrowsError
	
	|interface cartId creditCard|
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	self
		assertRunning: [ interface checkOutCart: (cartId + 1) withCard: creditCard ]
		producesError: TusLibrosInterface invalidCartIdErrorMessage.!
!TusLibrosInterfaceTest methodsFor: 'tests - cart checkout' stamp: 'TC 11/11/2021 14:40:21'!
test17checkOutCorrectlyOnce
	
	|interface cartId creditCard|
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	interface addToCart: cartId book: 'validBook2' times: 1.
	
	self assert: 0 equals: (interface checkOutCart: cartId withCard: creditCard).! !

!methodRemoval: TusLibrosInterfaceTest #test17checkOutCorrectly stamp: 'TC 11/11/2021 14:40:21'!
test17checkOutCorrectly
	
	|interface cartId creditCard|
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	interface addToCart: cartId book: 'validBook2' times: 1.
	
	self assert: 0 equals: (interface checkOutCart: cartId withCard: creditCard).!
!TusLibrosInterfaceTest methodsFor: 'tests - cart expiration' stamp: 'TC 11/11/2021 14:41:06'!
test19canNotListAnExpiredCart
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface listCart: cartId ]
		producesError: TusLibrosInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	! !

!methodRemoval: TusLibrosInterfaceTest #test19canNotListCartAfter30Minutes stamp: 'TC 11/11/2021 14:41:06'!
test19canNotListCartAfter30Minutes
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface listCart: cartId ]
		producesError: TusLibrosInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	!
!TusLibrosInterfaceTest methodsFor: 'tests - cart expiration' stamp: 'TC 11/11/2021 14:41:19'!
test20canNotAddItemsToExpiredCart
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface addToCart: cartId book: 'validBook' times: 1 ]
		producesError: TusLibrosInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	! !

!methodRemoval: TusLibrosInterfaceTest #test20canNotAddToCartAfter30Minutes stamp: 'TC 11/11/2021 14:41:19'!
test20canNotAddToCartAfter30Minutes
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface addToCart: cartId book: 'validBook' times: 1 ]
		producesError: TusLibrosInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	!
!TusLibrosInterfaceTest methodsFor: 'tests - cart expiration' stamp: 'TC 11/11/2021 14:41:27'!
test21canNotCheckoutExpiredCart
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface checkOutCart: cartId withCard: testObjectsFactory notExpiredCreditCard ]
		producesError: TusLibrosInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	! !

!methodRemoval: TusLibrosInterfaceTest #test21canNotCheckoutCartAfter30Minutes stamp: 'TC 11/11/2021 14:41:27'!
test21canNotCheckoutCartAfter30Minutes
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface checkOutCart: cartId withCard: testObjectsFactory notExpiredCreditCard ]
		producesError: TusLibrosInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	!
!TusLibrosInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 14:42:06'!
test23listingPurchasesOfInvalidUserThrowsAnError
	
	self
		assertRunning: [ self sampleInterface listPurchasesFor: 'andrew' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.! !

!methodRemoval: TusLibrosInterfaceTest #test23listPurchasesInvalidUser stamp: 'TC 11/11/2021 14:42:06'!
test23listPurchasesInvalidUser
	
	self
		assertRunning: [ self sampleInterface listPurchasesFor: 'andrew' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.!
!TusLibrosInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 14:42:34'!
test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError
	
	self
		assertRunning: [ self sampleInterface listPurchasesFor: 'john' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.! !

!methodRemoval: TusLibrosInterfaceTest #test24listPurchasesInvalidPassword stamp: 'TC 11/11/2021 14:42:34'!
test24listPurchasesInvalidPassword
	
	self
		assertRunning: [ self sampleInterface listPurchasesFor: 'john' withPassword: 'pass123' ]
		producesError: TusLibrosInterface invalidCredentialsErrorMessage.!
!TusLibrosInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 14:42:55'!
test25listingPurchasesForNewUserReturnsEmptyCollection
	
	self assert: (self sampleInterface listPurchasesFor: 'john' withPassword: 'hunter2') isEmpty.! !

!methodRemoval: TusLibrosInterfaceTest #test25listPurchasesForNewUserReturnsEmpty stamp: 'TC 11/11/2021 14:42:55'!
test25listPurchasesForNewUserReturnsEmpty
	
	self assert: (self sampleInterface listPurchasesFor: 'john' withPassword: 'hunter2') isEmpty.!
!TusLibrosInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 14:43:12'!
test26listingPurchasesRegistersSinglePurchase
	
	| interface creditCard cartId expectedItems expectedReport |
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 2.
	interface addToCart: cartId book: 'validBook2' times: 3.
	interface checkOutCart: cartId withCard: creditCard.
	
	expectedItems := Bag new.
	expectedItems add: 'validBook' withOccurrences: 2.
	expectedItems add: 'validBook2' withOccurrences: 3.
	expectedReport := UserPurchasesReport withTotal: (10*2) + (20*3) andItems: expectedItems.
	
	self assert: expectedReport = (interface listPurchasesFor: 'john' withPassword: 'hunter2').! !

!methodRemoval: TusLibrosInterfaceTest #test26listPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 14:43:12'!
test26listPurchasesRegistersSinglePurchase
	
	| interface creditCard cartId expectedItems expectedReport |
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 2.
	interface addToCart: cartId book: 'validBook2' times: 3.
	interface checkOutCart: cartId withCard: creditCard.
	
	expectedItems := Bag new.
	expectedItems add: 'validBook' withOccurrences: 2.
	expectedItems add: 'validBook2' withOccurrences: 3.
	expectedReport := UserPurchasesReport withTotal: (10*2) + (20*3) andItems: expectedItems.
	
	self assert: expectedReport = (interface listPurchasesFor: 'john' withPassword: 'hunter2').!
!TusLibrosInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 14:43:18'!
test27listingPurchasesRegistersMultiplePurchases
	
	| interface creditCard cartId expectedItems expectedReport |
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 2.
	interface checkOutCart: cartId withCard: creditCard.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 1.
	interface addToCart: cartId book: 'validBook2' times: 4.
	interface checkOutCart: cartId withCard: creditCard.
	
	expectedItems := Bag new.
	expectedItems add: 'validBook' withOccurrences: 3.
	expectedItems add: 'validBook2' withOccurrences: 4.
	expectedReport := UserPurchasesReport withTotal: (10*3) + (20*4) andItems: expectedItems.
	
	self assert: expectedReport equals: (interface listPurchasesFor: 'john' withPassword: 'hunter2').! !

!methodRemoval: TusLibrosInterfaceTest #test27listPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 14:43:18'!
test27listPurchasesRegistersMultiplePurchases
	
	| interface creditCard cartId expectedItems expectedReport |
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 2.
	interface checkOutCart: cartId withCard: creditCard.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 1.
	interface addToCart: cartId book: 'validBook2' times: 4.
	interface checkOutCart: cartId withCard: creditCard.
	
	expectedItems := Bag new.
	expectedItems add: 'validBook' withOccurrences: 3.
	expectedItems add: 'validBook2' withOccurrences: 4.
	expectedReport := UserPurchasesReport withTotal: (10*3) + (20*4) andItems: expectedItems.
	
	self assert: expectedReport equals: (interface listPurchasesFor: 'john' withPassword: 'hunter2').!

!classRenamed: #TusLibrosInterface as: #RESTInterface stamp: 'TC 11/11/2021 14:44:05'!
Smalltalk renameClassNamed: #TusLibrosInterface as: #RESTInterface!
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50877848!
test06listingInvalidCartThrowsAnError
	
	self withTestContext: [:interface :cartId :creditCard |
		self
			assertRunning: [ interface listCart: (cartId + 1) ]
			producesError: RESTInterface invalidCartIdErrorMessage.
	].! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879389!
test19canNotListAnExpiredCart
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface listCart: cartId ]
		producesError: RESTInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50877757!
sampleInterface 
	| users |
	users := Dictionary new.
	users add: 'john'->'hunter2'.
	^ RESTInterface withUsers: users withCatalog: (testObjectsFactory defaultCatalog) withTimeProvider: timeProvider withMerchantProcessor: (MerchantProcessor withDebitBehavior: [ :anAmount :aCreditCard | ]).! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50878036!
test22cartLastTimeUsedIsRefreshedAfterEachUse
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 20.
	self assert: (interface listCart: cartId) isEmpty.
	
	timeProvider advanceTimeByMinutes: 15.
	self assert: (interface listCart: cartId) isEmpty.
	
	timeProvider advanceTimeByMinutes: 31.
	self
		assertRunning: [ interface listCart: cartId ]
		producesError: RESTInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879447!
test21canNotCheckoutExpiredCart
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface checkOutCart: cartId withCard: testObjectsFactory notExpiredCreditCard ]
		producesError: RESTInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879025!
test01creatingCartWithInvalidUserThrowsAnError
	
	self
		assertRunning: [ self sampleInterface createCartFor: 'andrew' withPassword: 'pass123' ]
		producesError: RESTInterface invalidCredentialsErrorMessage.! !
!RESTInterface methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50878746!
restCart: aCartId
	| restCart |
	
	restCart := carts at: aCartId ifAbsent: [^ self error: RESTInterface invalidCartIdErrorMessage].
	^ restCart restCartAtTime: timeProvider currentTime.
	! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879269!
test07addingItemToInvalidCartThrowsAnError
	
	|interface cartId|
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	self
		assertRunning: [ interface addToCart: (cartId + 1) book: 123 times: 1 ]
		producesError: RESTInterface invalidCartIdErrorMessage.! !
!RESTInterface methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50878733!
cart: aCartId
	| restCart |
	
	restCart := carts at: aCartId ifAbsent: [^ self error: RESTInterface invalidCartIdErrorMessage].
	^ restCart cartAtTime: timeProvider currentTime.
	! !
!RESTCart methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50878413!
assertIsNotExpiredWithCurrentTime: aCurrentTime
	
	aCurrentTime - lastTimeAccessed > (self thirtyMinutes) ifTrue: [
		self error: RESTInterface canNotUseCartAfter30MinutesErrorMessage
	].! !
!RESTInterface methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50878755!
authenticateUser: anUser withPassword: aPassword
	|password|
	
	password := usersAndPasswords at: anUser ifAbsent: [self error: RESTInterface invalidCredentialsErrorMessage].
	password ~= aPassword ifTrue: [self error: RESTInterface invalidCredentialsErrorMessage].! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879417!
test20canNotAddItemsToExpiredCart
	
	|interface cartId|
	
	interface := self sampleInterface.
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	timeProvider advanceTimeByMinutes: 31.
	
	self
		assertRunning: [ interface addToCart: cartId book: 'validBook' times: 1 ]
		producesError: RESTInterface canNotUseCartAfter30MinutesErrorMessage.
	
	
	! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879152!
test02creatingCartWithIncorrectPasswordThrowsAnError
	
	self
		assertRunning: [ self sampleInterface createCartFor: 'john' withPassword: 'pass123' ]
		producesError: RESTInterface invalidCredentialsErrorMessage.! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879499!
test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError
	
	self
		assertRunning: [ self sampleInterface listPurchasesFor: 'john' withPassword: 'pass123' ]
		producesError: RESTInterface invalidCredentialsErrorMessage.! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879479!
test23listingPurchasesOfInvalidUserThrowsAnError
	
	self
		assertRunning: [ self sampleInterface listPurchasesFor: 'andrew' withPassword: 'pass123' ]
		producesError: RESTInterface invalidCredentialsErrorMessage.! !
!TusLibrosInterfaceTest methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 14:44:05' prior: 50879324!
test13checkOutNonExistingCartThrowsAnError
	
	|interface cartId creditCard|
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	
	self
		assertRunning: [ interface checkOutCart: (cartId + 1) withCard: creditCard ]
		producesError: RESTInterface invalidCartIdErrorMessage.! !

!classRenamed: #TusLibrosInterfaceTest as: #RESTInterfaceTest stamp: 'TC 11/11/2021 14:44:16'!
Smalltalk renameClassNamed: #TusLibrosInterfaceTest as: #RESTInterfaceTest!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 14:44:18'!
PASSED!

----SNAPSHOT----(11 November 2021 14:47:34) CuisUniversity-4532.image priorSource: 17466418!
!RESTInterface methodsFor: 'other' stamp: 'TC 11/11/2021 14:48:47' prior: 50878659!
checkOutCart: aCart withCard: aCreditCard registeringOn: aSalesBook

	| cashier |
	cashier := Cashier toCheckout: aCart charging: aCreditCard
		throught: merchantProcessor on: (timeProvider today) registeringOn: aSalesBook.

	cashier checkOut.
	
	^ aSalesBook size - 1.! !
!RESTInterfaceTest methodsFor: 'auxiliary' stamp: 'TC 11/11/2021 14:54:26' prior: 50879687!
sampleInterface 

	| users |
	users := Dictionary new.
	users add: 'john'->'hunter2'.
	^ RESTInterface 
		withUsers: users 
		withCatalog: (testObjectsFactory defaultCatalog) 
		withTimeProvider: timeProvider 
		withMerchantProcessor: (MerchantProcessor 
		withDebitBehavior: [ :anAmount :aCreditCard | ]).! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 14:54:28'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 14:54:28'!
PASSED!
!RESTInterfaceTest methodsFor: 'auxiliary' stamp: 'TC 11/11/2021 14:54:34' prior: 50880007!
sampleInterface 

	| users |
	users := Dictionary new.
	users add: 'john'->'hunter2'.
	
	^ RESTInterface 
		withUsers: users 
		withCatalog: (testObjectsFactory defaultCatalog) 
		withTimeProvider: timeProvider 
		withMerchantProcessor: (MerchantProcessor 
		withDebitBehavior: [ :anAmount :aCreditCard | ]).! !
!RESTInterfaceTest methodsFor: 'auxiliary' stamp: 'TC 11/11/2021 14:55:04' prior: 50877881!
withInterface: aBlockOfCode
	
	|interface |
	
	interface := self sampleInterface.
	
	aBlockOfCode value: self sampleInterface.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 14:55:08'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 14:55:08'!
PASSED!
!RESTInterfaceTest methodsFor: 'auxiliary' stamp: 'TC 11/11/2021 14:55:16' prior: 50880155!
withInterface: aBlockOfCode
	
	aBlockOfCode value: self sampleInterface.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 14:55:18'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 14:55:18'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart listing' stamp: 'TC 11/11/2021 15:00:44' prior: 50879220!
test12listingNonEmptyCartReturnsCollectionWithItsContent
	
	|expectedList|
	
	
	self withTestContext: [:interface :cartId :creditCard |
		self createFirstCart: interface.
		interface addToCart: cartId book: 'validBook' times: 3.
		interface addToCart: cartId book: 'validBook2' times: 2.
		interface addToCart: cartId book: 'validBook3' times: 1.
		interface addToCart: cartId book: 'validBook' times: 1.
		
		expectedList := Bag new.
		expectedList add: 'validBook' withOccurrences: 4.
		expectedList add: 'validBook2' withOccurrences: 2.
		expectedList add: 'validBook3'.
		
		self assert: expectedList equals: (interface listCart: cartId).
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:00:47'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:00:47'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart listing' stamp: 'TC 11/11/2021 15:01:05' prior: 50880413!
test12listingNonEmptyCartReturnsCollectionWithItsContent
	
	| expectedList |
	
	self withTestContext: [:interface :cartId :creditCard |
		
		self createFirstCart: interface.
		interface addToCart: cartId book: 'validBook' times: 3.
		interface addToCart: cartId book: 'validBook2' times: 2.
		interface addToCart: cartId book: 'validBook3' times: 1.
		interface addToCart: cartId book: 'validBook' times: 1.
		
		expectedList := Bag new.
		expectedList add: 'validBook' withOccurrences: 4.
		expectedList add: 'validBook2' withOccurrences: 2.
		expectedList add: 'validBook3'.
		
		self assert: expectedList equals: (interface listCart: cartId).
	].! !
!RESTInterfaceTest methodsFor: 'auxiliary' stamp: 'TC 11/11/2021 15:02:17' prior: 50877896!
withTestContext: aBlockOfCode
	
	|interface cartId creditCard|
	
	interface := self sampleInterface.
	"cartId := interface createCartFor: 'john' withPassword: 'hunter2'."
	cartId := self createFirstCart: interface.
	creditCard := testObjectsFactory notExpiredCreditCard.
	
	aBlockOfCode value: interface value: cartId value: creditCard.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:02:19'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:02:19'!
PASSED!
!RESTInterfaceTest methodsFor: 'auxiliary' stamp: 'TC 11/11/2021 15:02:23' prior: 50880583!
withTestContext: aBlockOfCode
	
	|interface cartId creditCard|
	
	interface := self sampleInterface.
	cartId := self createFirstCart: interface.
	creditCard := testObjectsFactory notExpiredCreditCard.
	
	aBlockOfCode value: interface value: cartId value: creditCard.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:03:02'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:03:02'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart adding' stamp: 'TC 11/11/2021 15:05:47' prior: 50879757!
test07addingItemToInvalidCartThrowsAnError
		
	self withTestContext: [:interface :cartId :creditCard |
		self
			assertRunning: [ interface addToCart: (cartId + 1) book: 123 times: 1 ]
			producesError: RESTInterface invalidCartIdErrorMessage.
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:05:48'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:05:48'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart adding' stamp: 'TC 11/11/2021 15:06:38' prior: 50879295!
test11addingAnItemToExistingCartAddsItToTheCollection
		
	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 3.
	
		self 
			assert: (Bag new add: 'validBook' withOccurrences: 3; yourself)
			equals: (interface listCart: cartId).
	
		].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:06:41'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:06:41'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart adding' stamp: 'TC 11/11/2021 15:06:47' prior: 50880987!
test11addingAnItemToExistingCartAddsItToTheCollection
		
	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 3.
	
		self 
			assert: (Bag new add: 'validBook' withOccurrences: 3; yourself)
			equals: (interface listCart: cartId).
	
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:06:53'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:06:53'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart checkout' stamp: 'TC 11/11/2021 15:10:18' prior: 50879849!
test13checkOutNonExistingCartThrowsAnError
		
	self withTestContext: [:interface :cartId :creditCard |
		self
			assertRunning: [ interface checkOutCart: (cartId + 1) withCard: creditCard ]
			producesError: RESTInterface invalidCartIdErrorMessage.
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:10:19'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:10:19'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart checkout' stamp: 'TC 11/11/2021 15:10:56' prior: 50879356!
test17checkOutCorrectlyOnce
	
	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 3.
		interface addToCart: cartId book: 'validBook2' times: 1.
		self assert: 0 equals: (interface checkOutCart: cartId withCard: creditCard).
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:10:58'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:10:58'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart checkout' stamp: 'TC 11/11/2021 15:12:22' prior: 50877968!
test18checkOutCorrectlySeveralTimes
	
	|interface cartId creditCard|
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 3.
	interface addToCart: cartId book: 'validBook2' times: 1.
	
	self assert: 0 equals: (interface checkOutCart: cartId withCard: creditCard).
	
	interface addToCart: cartId book: 'validBook3' times: 5.
	
	self assert: 1 equals: (interface checkOutCart: cartId withCard: creditCard).
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:12:23'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:12:23'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart checkout' stamp: 'TC 11/11/2021 15:13:07' prior: 50881526!
test18checkOutCorrectlySeveralTimes

	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 3.
		interface addToCart: cartId book: 'validBook2' times: 1.
	
		self assert: 0 equals: (interface checkOutCart: cartId withCard: creditCard).
	
		interface addToCart: cartId book: 'validBook3' times: 5.
	
		self assert: 1 equals: (interface checkOutCart: cartId withCard: creditCard).
		
	].
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:13:09'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:13:09'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart expiration' stamp: 'TC 11/11/2021 15:14:03' prior: 50879673!
test19canNotListAnExpiredCart
		
	self withTestContext: [:interface :cartId :creditCard |
		timeProvider advanceTimeByMinutes: 31.
		self
			assertRunning: [ interface listCart: cartId ]
			producesError: RESTInterface canNotUseCartAfter30MinutesErrorMessage.
	].
	
	
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:14:04'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:14:04'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart expiration' stamp: 'TC 11/11/2021 15:14:40' prior: 50879801!
test20canNotAddItemsToExpiredCart	
		
	self withTestContext: [:interface :cartId :creditCard |
		timeProvider advanceTimeByMinutes: 31.
		self
			assertRunning: [ interface addToCart: cartId book: 'validBook' times: 1 ]
			producesError: RESTInterface canNotUseCartAfter30MinutesErrorMessage.
	].
	
	
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:14:41'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:14:41'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart expiration' stamp: 'TC 11/11/2021 15:15:15' prior: 50879721!
test21canNotCheckoutExpiredCart
		
	self withTestContext: [:interface :cartId :creditCard |
		timeProvider advanceTimeByMinutes: 31.
		self
			assertRunning: [ interface checkOutCart: cartId withCard: testObjectsFactory notExpiredCreditCard ]
			producesError: RESTInterface canNotUseCartAfter30MinutesErrorMessage.
	].
	
	
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:15:16'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:15:16'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart expiration' stamp: 'TC 11/11/2021 15:16:07' prior: 50879700!
test22cartLastTimeUsedIsRefreshedAfterEachUse
		
	self withTestContext: [:interface :cartId :creditCard |
		timeProvider advanceTimeByMinutes: 20.
		self assert: (interface listCart: cartId) isEmpty.
	
		timeProvider advanceTimeByMinutes: 15.
		self assert: (interface listCart: cartId) isEmpty.
	
		timeProvider advanceTimeByMinutes: 31.
		self
			assertRunning: [ interface listCart: cartId ]
			producesError: RESTInterface canNotUseCartAfter30MinutesErrorMessage.
	].
	
	
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:16:08'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:16:08'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - cart listing' stamp: 'TC 11/11/2021 15:16:33' prior: 50879128!
test05listingEmptyCartReturnsEmptyCollection
	
	self withTestContext: [:interface :cartId :creditCard |
		self createFirstCart: interface.
		self assert: (interface listCart: 0) isEmpty.
	].! !
!RESTInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 15:17:34' prior: 50879535!
test26listingPurchasesRegistersSinglePurchase
	
	| expectedItems expectedReport |
	
	
	
	self withTestContext: [:interface :cartId :creditCard |
		expectedItems := Bag new.
		expectedItems add: 'validBook' withOccurrences: 2.
		expectedItems add: 'validBook2' withOccurrences: 3.
		expectedReport := UserPurchasesReport withTotal: (10*2) + (20*3) andItems: expectedItems.
		
		self assert: expectedReport = (interface listPurchasesFor: 'john' withPassword: 'hunter2').
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:17:36'!
FAILURE!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:17:36'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:17:36'!
FAILURE!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:17:50'!
FAILURE!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:17:50'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:17:50'!
FAILURE!
!RESTInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 15:19:04' prior: 50882366!
test26listingPurchasesRegistersSinglePurchase
	
	| expectedItems expectedReport |
	
	
	
	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 2.
		interface addToCart: cartId book: 'validBook2' times: 3.
		interface checkOutCart: cartId withCard: creditCard.
	
		expectedItems := Bag new.
		expectedItems add: 'validBook' withOccurrences: 2.
		expectedItems add: 'validBook2' withOccurrences: 3.
		expectedReport := UserPurchasesReport withTotal: (10*2) + (20*3) andItems: expectedItems.
		
		self assert: expectedReport = (interface listPurchasesFor: 'john' withPassword: 'hunter2').
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:19:05'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:19:05'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 15:19:08' prior: 50882636!
test26listingPurchasesRegistersSinglePurchase
	
	| expectedItems expectedReport |
	
	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 2.
		interface addToCart: cartId book: 'validBook2' times: 3.
		interface checkOutCart: cartId withCard: creditCard.
	
		expectedItems := Bag new.
		expectedItems add: 'validBook' withOccurrences: 2.
		expectedItems add: 'validBook2' withOccurrences: 3.
		expectedReport := UserPurchasesReport withTotal: (10*2) + (20*3) andItems: expectedItems.
		
		self assert: expectedReport = (interface listPurchasesFor: 'john' withPassword: 'hunter2').
	].! !
!RESTInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 15:20:01' prior: 50879590!
test27listingPurchasesRegistersMultiplePurchases
	
	| expectedItems expectedReport |

	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 2.
		interface checkOutCart: cartId withCard: creditCard.
		
		interface addToCart: cartId book: 'validBook' times: 1.
		interface addToCart: cartId book: 'validBook2' times: 4.
		interface checkOutCart: cartId withCard: creditCard.
		
		expectedItems := Bag new.
		expectedItems add: 'validBook' withOccurrences: 3.
		expectedItems add: 'validBook2' withOccurrences: 4.
		expectedReport := UserPurchasesReport withTotal: (10*3) + (20*4) andItems: expectedItems.
		
		self assert: expectedReport equals: (interface listPurchasesFor: 'john' withPassword: 'hunter2').
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:20:03'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:20:03'!
FAILURE!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:20:03'!
FAILURE!
!RESTInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 14:43:18' prior: 50882806!
test27listingPurchasesRegistersMultiplePurchases
	
	| interface creditCard cartId expectedItems expectedReport |
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 2.
	interface checkOutCart: cartId withCard: creditCard.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 1.
	interface addToCart: cartId book: 'validBook2' times: 4.
	interface checkOutCart: cartId withCard: creditCard.
	
	expectedItems := Bag new.
	expectedItems add: 'validBook' withOccurrences: 3.
	expectedItems add: 'validBook2' withOccurrences: 4.
	expectedReport := UserPurchasesReport withTotal: (10*3) + (20*4) andItems: expectedItems.
	
	self assert: expectedReport equals: (interface listPurchasesFor: 'john' withPassword: 'hunter2').! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:21:05'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:21:05'!
PASSED!
!RESTInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 15:21:25' prior: 50882960!
test27listingPurchasesRegistersMultiplePurchases
	
	| interface creditCard cartId expectedItems expectedReport |
	
	creditCard := testObjectsFactory notExpiredCreditCard.
	interface := self sampleInterface.
	
	cartId := interface createCartFor: 'john' withPassword: 'hunter2'.
	interface addToCart: cartId book: 'validBook' times: 2.
	interface checkOutCart: cartId withCard: creditCard.
	
	interface addToCart: cartId book: 'validBook' times: 1.
	interface addToCart: cartId book: 'validBook2' times: 4.
	interface checkOutCart: cartId withCard: creditCard.
	
	expectedItems := Bag new.
	expectedItems add: 'validBook' withOccurrences: 3.
	expectedItems add: 'validBook2' withOccurrences: 4.
	expectedReport := UserPurchasesReport withTotal: (10*3) + (20*4) andItems: expectedItems.
	
	self assert: expectedReport equals: (interface listPurchasesFor: 'john' withPassword: 'hunter2').! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:21:27'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:21:27'!
FAILURE!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:21:27'!
FAILURE!
!RESTInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 15:20:01' prior: 50883116!
test27listingPurchasesRegistersMultiplePurchases
	
	| expectedItems expectedReport |

	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 2.
		interface checkOutCart: cartId withCard: creditCard.
		
		interface addToCart: cartId book: 'validBook' times: 1.
		interface addToCart: cartId book: 'validBook2' times: 4.
		interface checkOutCart: cartId withCard: creditCard.
		
		expectedItems := Bag new.
		expectedItems add: 'validBook' withOccurrences: 3.
		expectedItems add: 'validBook2' withOccurrences: 4.
		expectedReport := UserPurchasesReport withTotal: (10*3) + (20*4) andItems: expectedItems.
		
		self assert: expectedReport equals: (interface listPurchasesFor: 'john' withPassword: 'hunter2').
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:22:19'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:22:19'!
FAILURE!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:22:19'!
FAILURE!
!RESTInterfaceTest methodsFor: 'tests - list purchases' stamp: 'TC 11/11/2021 15:23:12' prior: 50883273!
test27listingPurchasesRegistersMultiplePurchases
	
	| cartId2 expectedItems expectedReport |

	self withTestContext: [:interface :cartId :creditCard |
		interface addToCart: cartId book: 'validBook' times: 2.
		interface checkOutCart: cartId withCard: creditCard.
		
		cartId2 := interface createCartFor: 'john' withPassword: 'hunter2'.
		interface addToCart: cartId2 book: 'validBook' times: 1.
		interface addToCart: cartId2 book: 'validBook2' times: 4.
		interface checkOutCart: cartId2 withCard: creditCard.
		
		expectedItems := Bag new.
		expectedItems add: 'validBook' withOccurrences: 3.
		expectedItems add: 'validBook2' withOccurrences: 4.
		expectedReport := UserPurchasesReport withTotal: (10*3) + (20*4) andItems: expectedItems.
		
		self assert: expectedReport equals: (interface listPurchasesFor: 'john' withPassword: 'hunter2').
	].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:23:13'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:23:14'!
PASSED!

----SNAPSHOT----(11 November 2021 15:23:23) CuisUniversity-4532.image priorSource: 17546900!

!methodRemoval: RESTInterfaceTest #withInterface: stamp: 'TC 11/11/2021 15:25:21'!
withInterface: aBlockOfCode
	
	aBlockOfCode value: self sampleInterface.!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:25:22'!
PASSED!

!methodRemoval: RESTInterfaceTest #withStandardInterfaceAssert: stamp: 'TC 11/11/2021 15:25:36'!
withStandardInterfaceAssert: aBlockOfCode
	
	|interface |
	
	interface := self sampleInterface.
	
	self createFirstCart: interface.
	
	aBlockOfCode value.!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:25:42'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:25:42'!
PASSED!
!RESTInterface methodsFor: 'cart managament' stamp: 'TC 11/11/2021 15:26:38' prior: 50879770!
cart: aCartId

	| restCart |
	
	restCart := carts at: aCartId ifAbsent: [^ self error: RESTInterface invalidCartIdErrorMessage].
	^ restCart cartAtTime: timeProvider currentTime.
	! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:27:21'!
cartWithId: aCartId

	^ self cart: aCartId! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:27:21' prior: 50878676!
addToCart: aCartId book: aBookISBN times: anAmount

	(self cartWithId: aCartId) add: anAmount of: aBookISBN.	
	^ true.! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:27:29' prior: 50883853!
addToCart: aCartId book: aBookISBN times: anAmount

	(self cartWithId: aCartId) add: anAmount of: aBookISBN.	
	^ true.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:27:30'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:27:30'!
PASSED!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:27:57' prior: 50878683!
checkOutCart: aCartId withCard: aCreditCard

	|cart restCart salesBook|
	
	cart := self cart: aCartId.
	restCart := self restCart: aCartId.
	salesBook := usersSalesBook at: (restCart user) ifAbsent: [self createEmptySalesBookFor: (restCart user)].

	^ self checkOutCart: cart withCard: aCreditCard registeringOn: salesBook.! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:28:28' prior: 50883989!
checkOutCart: aCartId withCard: aCreditCard

	|cart restCart salesBook|
	
	cart := self cartWithId: aCartId.
	restCart := self restCart: aCartId.
	salesBook := usersSalesBook at: (restCart user) ifAbsent: [self createEmptySalesBookFor: (restCart user)].

	^ self checkOutCart: cart withCard: aCreditCard registeringOn: salesBook.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:28:29'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:28:29'!
PASSED!
!RESTInterface methodsFor: 'cart managament' stamp: 'TC 11/11/2021 15:28:37' prior: 50879747!
restCart: aCartId

	| restCart |
	
	restCart := carts at: aCartId ifAbsent: [^ self error: RESTInterface invalidCartIdErrorMessage].
	^ restCart restCartAtTime: timeProvider currentTime.
	! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:29:37' prior: 50883860!
addToCart: aCartId book: aBookISBN times: anAmount

	(self cart: aCartId) add: anAmount of: aBookISBN.	
	^ true.! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:29:42' prior: 50884003!
checkOutCart: aCartId withCard: aCreditCard

	|cart restCart salesBook|
	
	cart := self cart: aCartId.
	restCart := self restCart: aCartId.
	salesBook := usersSalesBook at: (restCart user) ifAbsent: [self createEmptySalesBookFor: (restCart user)].

	^ self checkOutCart: cart withCard: aCreditCard registeringOn: salesBook.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:29:43'!
PASSED!

!methodRemoval: RESTInterface #cartWithId: stamp: 'TC 11/11/2021 15:29:48'!
cartWithId: aCartId

	^ self cart: aCartId!
!RESTInterface methodsFor: 'cart managament' stamp: 'TC 11/11/2021 15:29:58'!
cartWithId: aCartId

	| restCart |
	
	restCart := carts at: aCartId ifAbsent: [^ self error: RESTInterface invalidCartIdErrorMessage].
	^ restCart cartAtTime: timeProvider currentTime.
	! !
!RESTInterface methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 15:29:58' prior: 50884149!
addToCart: aCartId book: aBookISBN times: anAmount

	(self cartWithId: aCartId) add: anAmount of: aBookISBN.	
	^ true.! !
!RESTInterface methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 15:29:58' prior: 50884156!
checkOutCart: aCartId withCard: aCreditCard

	|cart restCart salesBook|
	
	cart := self cartWithId: aCartId.
	restCart := self restCart: aCartId.
	salesBook := usersSalesBook at: (restCart user) ifAbsent: [self createEmptySalesBookFor: (restCart user)].

	^ self checkOutCart: cart withCard: aCreditCard registeringOn: salesBook.! !
!RESTInterface methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 15:29:58' prior: 50878705!
listCart: aCartId
	
	^ (self cartWithId: aCartId) list asBag.! !

!methodRemoval: RESTInterface #cart: stamp: 'TC 11/11/2021 15:29:58'!
cart: aCartId

	| restCart |
	
	restCart := carts at: aCartId ifAbsent: [^ self error: RESTInterface invalidCartIdErrorMessage].
	^ restCart cartAtTime: timeProvider currentTime.
	!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:30:00'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:30:00'!
PASSED!
!RESTInterface methodsFor: 'cart managament' stamp: 'TC 11/11/2021 15:30:12'!
restCartWithId: aCartId

	| restCart |
	
	restCart := carts at: aCartId ifAbsent: [^ self error: RESTInterface invalidCartIdErrorMessage].
	^ restCart restCartAtTime: timeProvider currentTime.
	! !
!RESTInterface methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 15:30:12' prior: 50884311!
checkOutCart: aCartId withCard: aCreditCard

	|cart restCart salesBook|
	
	cart := self cartWithId: aCartId.
	restCart := self restCartWithId: aCartId.
	salesBook := usersSalesBook at: (restCart user) ifAbsent: [self createEmptySalesBookFor: (restCart user)].

	^ self checkOutCart: cart withCard: aCreditCard registeringOn: salesBook.! !

!methodRemoval: RESTInterface #restCart: stamp: 'TC 11/11/2021 15:30:12'!
restCart: aCartId

	| restCart |
	
	restCart := carts at: aCartId ifAbsent: [^ self error: RESTInterface invalidCartIdErrorMessage].
	^ restCart restCartAtTime: timeProvider currentTime.
	!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:30:13'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:30:13'!
PASSED!
!RESTInterface methodsFor: 'cart managament' stamp: 'TC 11/11/2021 15:30:20' prior: 50878721!
addNewCartFromUser: anUser

	|restCart addedCartId|
	
	addedCartId := self nextCartId.
	
	restCart := RESTCart
					forCart: (Cart acceptingItemsOf: catalog)
					withId: addedCartId
					atTime: timeProvider currentTime
					fromUser: anUser.
	
	carts add: addedCartId->restCart.
	^ addedCartId.! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:31:44' prior: 50884470!
checkOutCart: aCartId withCard: aCreditCard

	|cart restCart salesBook|
	
	cart := self cartWithId: aCartId.
	restCart := self restCartWithId: aCartId.
	salesBook := usersSalesBook at: (restCart user) ifAbsent: [self createEmptySalesBookFor: (restCart user)].
	salesBook := self salesBookForUserOfCart: aCartId.

	^ self checkOutCart: cart withCard: aCreditCard registeringOn: salesBook.! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:33:20'!
salesBookForUserOfCart: aCartId

	| cartUser |
	
	cartUser := (self restCartWithId: aCartId) user.
	^ usersSalesBook at: cartUser ifAbsent: [self createEmptySalesBookFor: cartUser].
! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:33:24'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:33:24'!
PASSED!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:33:54' prior: 50884627!
checkOutCart: aCartId withCard: aCreditCard

	|cart salesBook|
	
	cart := self cartWithId: aCartId.
	salesBook := self salesBookForUserOfCart: aCartId.

	^ self checkOutCart: cart withCard: aCreditCard registeringOn: salesBook.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:33:57'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:33:57'!
PASSED!
!Cart methodsFor: 'total' stamp: 'TC 11/11/2021 15:35:09' prior: 50878194!
list

	^ items copy.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:35:10'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:35:10'!
PASSED!
!Cart methodsFor: 'initialization' stamp: 'TC 11/11/2021 15:36:08' prior: 50878177!
initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := Bag new.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:36:09'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:36:09'!
PASSED!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:36:21' prior: 50884325!
listCart: aCartId
	
	^ (self cartWithId: aCartId) list.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:36:23'!
PASSED!

----SNAPSHOT----(11 November 2021 15:37:18) CuisUniversity-4532.image priorSource: 17661686!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:39:26' prior: 50878710!
listPurchasesFor: anUser withPassword: aPassword
	
	
	self authenticateUser: anUser withPassword: aPassword.
		
	^ UserPurchasesReport forSales: (self salesBookForUser: anUser).! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:39:37' prior: 50885289!
listPurchasesFor: anUser withPassword: aPassword
	
	self authenticateUser: anUser withPassword: aPassword.
		
	^ UserPurchasesReport forSales: (self salesBookForUser: anUser).! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:39:52'!
salesBookForUser: anUser

	^ usersSalesBook at: anUser ifAbsent: [^ UserPurchasesReport empty].! !
!RESTInterface methodsFor: 'other' stamp: 'TC 11/11/2021 15:40:15'!
salesBookForUserOwningCart: aCartId

	| cartUser |
	
	cartUser := (self restCartWithId: aCartId) user.
	^ usersSalesBook at: cartUser ifAbsent: [self createEmptySalesBookFor: cartUser].
! !
!RESTInterface methodsFor: 'as yet unclassified' stamp: 'TC 11/11/2021 15:40:15' prior: 50884773!
checkOutCart: aCartId withCard: aCreditCard

	|cart salesBook|
	
	cart := self cartWithId: aCartId.
	salesBook := self salesBookForUserOwningCart: aCartId.

	^ self checkOutCart: cart withCard: aCreditCard registeringOn: salesBook.! !

!methodRemoval: RESTInterface #salesBookForUserOfCart: stamp: 'TC 11/11/2021 15:40:15'!
salesBookForUserOfCart: aCartId

	| cartUser |
	
	cartUser := (self restCartWithId: aCartId) user.
	^ usersSalesBook at: cartUser ifAbsent: [self createEmptySalesBookFor: cartUser].
!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:40:23'!
ERROR!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:40:23'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:40:23'!
ERROR!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:41:20' prior: 50885298!
listPurchasesFor: anUser withPassword: aPassword
	
	self authenticateUser: anUser withPassword: aPassword.
		
		
	^ UserPurchasesReport forSales: (self salesBookForUser: anUser).! !
!RESTInterface methodsFor: 'resources interface' stamp: 'ds 11/10/2021 21:22:33' prior: 50885467!
listPurchasesFor: anUser withPassword: aPassword
	
	|userSales totalPurchases |
	self authenticateUser: anUser withPassword: aPassword.
	
	userSales := usersSalesBook at: anUser ifAbsent: [^ UserPurchasesReport empty].
	
	^ UserPurchasesReport forSales: userSales.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:41:56'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:42:11'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:42:11'!
PASSED!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:42:19' prior: 50885476!
listPurchasesFor: anUser withPassword: aPassword
	
	|userSales |
	self authenticateUser: anUser withPassword: aPassword.
	
	userSales := usersSalesBook at: anUser ifAbsent: [^ UserPurchasesReport empty].
	
	^ UserPurchasesReport forSales: userSales.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:42:20'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:42:20'!
PASSED!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:43:18' prior: 50885732!
listPurchasesFor: anUser withPassword: aPassword
	
	|userSales |
	self authenticateUser: anUser withPassword: aPassword.
	
	userSales := self salesBookForUser: anUser.
	
	^ UserPurchasesReport forSales: userSales.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:43:20'!
ERROR!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:43:20'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:43:20'!
ERROR!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:44:11' prior: 50885866!
listPurchasesFor: aUser withPassword: aPassword
	
	|userSales |
	self authenticateUser: aUser withPassword: aPassword.
	
	userSales := self salesBookForUser: aUser.
	
	^ UserPurchasesReport forSales: userSales.! !
!RESTInterface methodsFor: 'cart managament' stamp: 'TC 11/11/2021 15:44:17' prior: 50884614!
addNewCartFromUser: aUser

	|restCart addedCartId|
	
	addedCartId := self nextCartId.
	
	restCart := RESTCart
					forCart: (Cart acceptingItemsOf: catalog)
					withId: addedCartId
					atTime: timeProvider currentTime
					fromUser: aUser.
	
	carts add: addedCartId->restCart.
	^ addedCartId.! !
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:44:23' prior: 50879789!
authenticateUser: aUser withPassword: aPassword
	|password|
	
	password := usersAndPasswords at: aUser ifAbsent: [self error: RESTInterface invalidCredentialsErrorMessage].
	password ~= aPassword ifTrue: [self error: RESTInterface invalidCredentialsErrorMessage].! !
!RESTInterface methodsFor: 'other' stamp: 'TC 11/11/2021 15:44:37' prior: 50878670!
createEmptySalesBookFor: aUser

	^ usersSalesBook at: aUser put: (OrderedCollection new).! !
!RESTInterface methodsFor: 'other' stamp: 'TC 11/11/2021 15:44:42' prior: 50885307!
salesBookForUser: aUser

	^ usersSalesBook at: aUser ifAbsent: [^ UserPurchasesReport empty].! !
!RESTInterface methodsFor: 'other' stamp: 'TC 11/11/2021 15:45:16'!
reportForUser: aUser

	^ usersSalesBook at: aUser ifAbsent: [^ UserPurchasesReport empty].! !
!RESTInterface methodsFor: 'other' stamp: 'TC 11/11/2021 15:45:58'!
salesReportForUser: aUser

	^ usersSalesBook at: aUser ifAbsent: [^ UserPurchasesReport empty].! !

!methodRemoval: RESTInterface #reportForUser: stamp: 'TC 11/11/2021 15:45:58'!
reportForUser: aUser

	^ usersSalesBook at: aUser ifAbsent: [^ UserPurchasesReport empty].!
!RESTInterface methodsFor: 'other' stamp: 'TC 11/11/2021 15:46:24' prior: 50886054!
salesReportForUser: aUser

	| userSales |
	
	userSales := usersSalesBook at: aUser ifAbsent: [^ UserPurchasesReport empty].
	^ UserPurchasesReport forSales: userSales.
! !

!methodRemoval: RESTInterface #salesBookForUser: stamp: 'TC 11/11/2021 15:46:35'!
salesBookForUser: aUser

	^ usersSalesBook at: aUser ifAbsent: [^ UserPurchasesReport empty].!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:46:49' prior: 50886002!
listPurchasesFor: aUser withPassword: aPassword
	
	
	self authenticateUser: aUser withPassword: aPassword.
	
	^ self salesReportForUser: aUser.
	
! !
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:46:52' prior: 50886080!
listPurchasesFor: aUser withPassword: aPassword
	
	self authenticateUser: aUser withPassword: aPassword.
	
	^ self salesReportForUser: aUser.
	
! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:46:54'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:46:54'!
PASSED!
!RESTInterface methodsFor: 'resources interface' stamp: 'TC 11/11/2021 15:46:57' prior: 50886088!
listPurchasesFor: aUser withPassword: aPassword
	
	self authenticateUser: aUser withPassword: aPassword.
	^ self salesReportForUser: aUser.
	
! !
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:48:00'!
passwordFor: aUser
	
	^ usersAndPasswords at: aUser ifAbsent: [self error: RESTInterface invalidCredentialsErrorMessage].
! !
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:48:22' prior: 50886025!
authenticateUser: aUser withPassword: aPassword
	|password|
	
	password := self passwordFor: aUser.
	password ~= aPassword ifTrue: [self error: RESTInterface invalidCredentialsErrorMessage].! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:48:24'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:48:24'!
PASSED!
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:48:52' prior: 50886232!
authenticateUser: aUser withPassword: enteredPassword
	|password|
	
	password := self passwordFor: aUser.
	password ~= enteredPassword ifTrue: [self error: RESTInterface invalidCredentialsErrorMessage].! !
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:48:57' prior: 50886364!
authenticateUser: enteredUser withPassword: enteredPassword
	|password|
	
	password := self passwordFor: enteredUser.
	password ~= enteredPassword ifTrue: [self error: RESTInterface invalidCredentialsErrorMessage].! !
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:49:04' prior: 50886374!
authenticateUser: enteredUser withPassword: enteredPassword
	
	|password|
	
	password := self passwordFor: enteredUser.
	password ~= enteredPassword ifTrue: [self error: RESTInterface invalidCredentialsErrorMessage].! !
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:51:42' prior: 50886384!
authenticateUser: enteredUser withPassword: enteredPassword
	
	|correctPassword|
	
	correctPassword := self passwordFor: enteredUser.
	self assertThatProvidedPassword: enteredPassword matches: correctPassword.
	! !
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:52:30'!
assertThatProvidedPassword: attemptedPassword matches: actualPassword.

	actualPassword ~= attemptedPassword ifTrue: [self error: RESTInterface invalidCredentialsErrorMessage].

	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:52:32'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:52:32'!
PASSED!
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:53:12' prior: 50886404!
assertThatProvidedPassword: attemptedPassword matches: actualPassword.

	actualPassword ~= attemptedPassword ifTrue: [self error: RESTInterface invalidCredentialsErrorMessage].
	^ true.

	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:53:13'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:53:13'!
PASSED!
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:53:24' prior: 50886394!
authenticateUser: enteredUser withPassword: enteredPassword
	
	|correctPassword|
	
	correctPassword := self passwordFor: enteredUser.
	^ self assertThatProvidedPassword: enteredPassword matches: correctPassword.
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:53:25'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:53:25'!
PASSED!
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:53:52' prior: 50886666!
authenticateUser: enteredUser withPassword: enteredPassword
	
	^ self assertThatProvidedPassword: enteredPassword matches: (self passwordFor: enteredUser).
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:53:55'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:53:55'!
PASSED!
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:54:02' prior: 50886798!
authenticateUser: enteredUser withPassword: enteredPassword
	
	^ self 
		assertThatProvidedPassword: enteredPassword 
		matches: (self passwordFor: enteredUser).
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:54:08'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:54:08'!
PASSED!
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:54:39' prior: 50886535!
assertThatProvidedPassword: attemptedPassword matches: actualPassword.

	actualPassword == attemptedPassword ifFalse: [self error: RESTInterface invalidCredentialsErrorMessage].
	^ true.

	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:54:40'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:54:40'!
ERROR!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:54:40'!
ERROR!
!RESTInterface methodsFor: 'authentication' stamp: 'TC 11/11/2021 15:54:44' prior: 50887060!
assertThatProvidedPassword: attemptedPassword matches: actualPassword.

	actualPassword = attemptedPassword ifFalse: [self error: RESTInterface invalidCredentialsErrorMessage].
	^ true.

	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:54:45'!
PASSED!

----SNAPSHOT----(11 November 2021 15:55:08) CuisUniversity-4532.image priorSource: 17716317!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test01creatingCartWithInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test02creatingCartWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test03creatingCartWithValidCredentialsReturnsCartId stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test04cartIdsAreAssignedIncrementally stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test05listingEmptyCartReturnsEmptyCollection stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test06listingInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test07addingItemToInvalidCartThrowsAnError stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test11addingAnItemToExistingCartAddsItToTheCollection stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test12listingNonEmptyCartReturnsCollectionWithItsContent stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test13checkOutNonExistingCartThrowsAnError stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test17checkOutCorrectlyOnce stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test18checkOutCorrectlySeveralTimes stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test19canNotListAnExpiredCart stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test20canNotAddItemsToExpiredCart stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test21canNotCheckoutExpiredCart stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test22cartLastTimeUsedIsRefreshedAfterEachUse stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test23listingPurchasesOfInvalidUserThrowsAnError stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test24listingPurchasesOfUserWithIncorrectPasswordThrowsAnError stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test25listingPurchasesForNewUserReturnsEmptyCollection stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test26listingPurchasesRegistersSinglePurchase stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

!testRun: #RESTInterfaceTest #test27listingPurchasesRegistersMultiplePurchases stamp: 'TC 11/11/2021 15:55:12'!
PASSED!

----QUIT----(11 November 2021 15:55:28) CuisUniversity-4532.image priorSource: 17781474!